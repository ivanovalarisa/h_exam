"use strict";function _createForOfIteratorHelper(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=_unsupportedIterableToArray(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,o=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){i=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw r}}}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}var getDataFromServer=function(){return fetch("../data.json").then(function(t){return t.json()}).then(function(t){return pushObjToLocalStorage(t),t})},pushObjToLocalStorage=function(t){localStorage.getItem("dataGoods")&&getDataFromLocalStorage(),localStorage.setItem("dataGoods",JSON.stringify(t))},getDataFromLocalStorage=function(){return JSON.parse(localStorage.getItem("dataGoods"))},dataObj=getDataFromLocalStorage();function displayProduct(o,i){for(var t in dataObj)if(t===o)for(var e=function(){var t=_slicedToArray(n[a],2),r=t[0];t[1].forEach(function(t,e,a){if(Object.entries(t)[0][1]===i){var n=a[e].quantity;document.getElementById("name-odj").insertAdjacentHTML("afterbegin","\n                                <h3>".concat(a[e].name,"</h3>\n                                <h2>$").concat(a[e].price,'</h2>\n                                <ul class="list" id="list">\n                                    <li><a><span>Category</span> :  ').concat(r,"</a></li>\n                                    <li><a><span>Brand</span> : ").concat(a[e].brand,"</a></li>\n                                    <li><a><span>Color</span> : ").concat(a[e].color,"</a></li>\n                                    <li><a><span>Availibility</span> : ").concat(determineAvailability(n),'</a></li>\n                                    <li><a><span>Size</span> : </a></li\n                                    <li><div id="size" data-quantity="').concat(a[e].quantity,'"></div></li\n                                </ul>\n                                <p>').concat(a[e]["short-description"],"</p>")),document.getElementById("profile").insertAdjacentHTML("afterbegin","\n                                <p>".concat(a[e].description,"</p>")),document.getElementById("img").insertAdjacentHTML("afterbegin",'\n                                <div class="row justify-content-between">\n                                    <div class="col-sm-2" id="all-photo">\n                                        <div class="row m-bottom">\n                                            <img class="img-fluid img-thumbnail" src="img/product/'.concat(o,"/").concat(Object.entries(t)[1][1][0],'" alt="">\n                                        </div>\n                                        <div class="row m-bottom">\n                                            <img class="img-fluid img-thumbnail" src="img/product/').concat(o,"/").concat(Object.entries(t)[1][1][1],'" alt="">\n                                        </div>\n                                        <div class="row m-bottom">\n                                            <img class="img-fluid img-thumbnail" src="img/product/').concat(o,"/").concat(Object.entries(t)[1][1][2],'" alt="">\n                                        </div>\n                                    </div>\n\n                                    <div class="col-sm-10 container-fluid">\n                                        <img class="img-fluid img-thumbnail" id="photo-to-view" src="img/product/').concat(o,"/").concat(Object.entries(t)[1][1][0],'" alt="">\n                                    </div>\n                                </div>')),Object.entries(t)[4][1].forEach(function(t,e,a){document.getElementById("size").insertAdjacentHTML("beforeend","\n                                <div><span>".concat(a[e],"</span></div>"))}),transferDataProductToCart(t,o)}})},a=0,n=Object.entries(dataObj[t]);a<n.length;a++)e()}function selectedSize(){var r=document.getElementById("size");r.addEventListener("click",function(t){var e,a=_createForOfIteratorHelper(r.childNodes);try{for(a.s();!(e=a.n()).done;){var n=e.value;"DIV"===n.tagName&&n.classList.remove("selected")}}catch(t){a.e(t)}finally{a.f()}"DIV"===t.target.tagName?t.target.classList.add("selected"):"SPAN"===t.target.tagName&&t.target.parentNode.classList.add("selected")})}function localStorageGet(){localStorage.getItem("dataCart")&&JSON.parse(localStorage.getItem("dataCart"));var t=localStorage.getItem("dataCart");try{t=JSON.parse(t)}catch(t){return null}return t}var quantity=localStorageGet();function showQuantityGoodsInBasket(t){document.getElementById("show").innerHTML=t.length}function transferDataProductToCart(l,d,s){"0"!==document.getElementById("size").dataset.quantity?document.getElementById("add-cart").addEventListener("click",function(){var t={},e=localStorageGet(s)||[];for(var a in t.collection=d,l)"id"===a?t.id=l[a]:"name"===a?t.name=l[a]:"price"===a?t.price=l[a]:"photo"===a&&(t.photo=l[a][0]);var n=document.getElementsByClassName("qty");t.quantity=n[0].value;var r,o,i=_createForOfIteratorHelper(document.getElementById("size").childNodes);try{for(i.s();!(r=i.n()).done;){var c=r.value;"selected"===c.className&&(t.size=c.innerText)}}catch(t){i.e(t)}finally{i.f()}e.push(t),o=e,localStorage.setItem("dataCart",JSON.stringify(o))}):notAddToCart()}function defaultSelectedSize(){document.getElementById("size").children[0].classList.add("selected")}function viewPhoto(){document.getElementById("all-photo").addEventListener("click",function(t){var e=document.getElementById("photo-to-view"),a=t.target.getAttribute("src");e.setAttribute("src",a)})}function determineAvailability(t){return"0"===t?"Not available":"In stock"}function notAvailableStyle(){var t=document.getElementById("size");if("0"===t.dataset.quantity){var e,a=_createForOfIteratorHelper(t.children);try{for(a.s();!(e=a.n()).done;){var n=e.value;"DIV"===n.tagName&&n.classList.add("disabled")}}catch(t){a.e(t)}finally{a.f()}notAddToCart(),document.getElementById("qty").setAttribute("disabled",!0);var r,o=_createForOfIteratorHelper(document.getElementsByClassName("items-count"));try{for(o.s();!(r=o.n()).done;){r.value.classList.add("disabled")}}catch(t){o.e(t)}finally{o.f()}}}function notAddToCart(){var t=document.getElementById("add-cart");t.classList.add("disabled"),t.addEventListener("click",function(t){t.preventDefault()},!1)}showQuantityGoodsInBasket(quantity);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9uLmpzIl0sIm5hbWVzIjpbImdldERhdGFGcm9tU2VydmVyIiwiZmV0Y2giLCJ0aGVuIiwiZGF0YU9iaiIsImpzb24iLCJwdXNoT2JqVG9Mb2NhbFN0b3JhZ2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2V0RGF0YUZyb21Mb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiZGlzcGxheVByb2R1Y3QiLCJjb2xsZWN0aW9uIiwiaWQiLCJjYXRlZ29yeUl0ZW0iLCJfbG9vcCIsIl9PYmplY3QkZW50cmllcyRfaSIsIl9zbGljZWRUb0FycmF5IiwiX09iamVjdCRlbnRyaWVzIiwiX2kiLCJzdWJjYXRlZ29yaWVzIiwiZm9yRWFjaCIsInF1YW50aXR5IiwiYXJnIiwiaSIsImluc2VydEFkamFjZW50SFRNTCIsIm5hbWUiLCJwcmljZSIsImJyYW5kIiwiY29sb3IiLCJkZXRlcm1pbmVBdmFpbGFiaWxpdHkiLCJnZXRFbGVtZW50QnlJZCIsImRlc2NyaXB0aW9uIiwiT2JqZWN0IiwiZW50cmllcyIsIml0ZW0iLCJhcnJTaXplIiwiaW5kIiwiaXRlbVNpemUiLCJkb2N1bWVudCIsImNvbmNhdCIsInRyYW5zZmVyRGF0YVByb2R1Y3RUb0NhcnQiLCJsZW5ndGgiLCJzZWxlY3RlZFNpemUiLCJzaXplIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwiY2hpbGROb2RlcyIsInMiLCJuIiwiZG9uZSIsInZhbHVlIiwidGFnTmFtZSIsInJlbW92ZSIsImVyciIsImYiLCJjbGFzc0xpc3QiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiYWRkIiwibG9jYWxTdG9yYWdlR2V0IiwiaW5mbyIsInNob3dRdWFudGl0eUdvb2RzSW5CYXNrZXQiLCJpbm5lckhUTUwiLCJxdWFudGl0eUdvb2RzIiwicHJvZHVjdCIsImRhdGFzZXQiLCJkYXRhQ2FydCIsIm5vdEFkZFRvQ2FydCIsImRhdGFQcm9kdWN0VG9DYXJ0IiwiY3VycmVudENhcnRJdGVtcyIsIml0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIl9zdGVwMiIsImFyIiwiX2l0ZXJhdG9yMiIsImNsYXNzTmFtZSIsImlubmVyVGV4dCIsInB1c2giLCJkZWZhdWx0U2VsZWN0ZWRTaXplIiwiY2hpbGRyZW4iLCJ2aWV3UGhvdG8iLCJsb2NhbFN0b3JhZ2VTZXQiLCJkYXRhU3JjIiwiZ2V0QXR0cmlidXRlIiwicGhvdG9Ub1ZpZXciLCJzZXRBdHRyaWJ1dGUiLCJub3RBdmFpbGFibGVTdHlsZSIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJfc3RlcDQiLCJfaXRlcmF0b3I0IiwiYWRkQ2FydCIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFBQSxneURBRUEsSUFBTUEsa0JBQW9CLFdBQ3RCLE9BQU9DLE1BQU0sZ0JBQ1pDLEtBQUssU0FBQ0MsR0FBRCxPQUFhQSxFQUFRQyxTQUMxQkYsS0FBSyxTQUFDQyxHQUVILE9BREFFLHNCQUFzQkYsR0FDZkEsS0FJVEUsc0JBQXdCLFNBQUNGLEdBQ3ZCRyxhQUFhQyxRQUFRLGNBRXJCQywwQkFYSkYsYUFBYUcsUUFBQSxZQUNQQyxLQUFBQyxVQUFBUixLQUVGRSx3QkFBc0JGLFdBQUFBLE9BQXRCTyxLQUFBRSxNQUFBTixhQUFBQyxRQUFBLGVBSEpKLFFBQUFLLDBCQVlDLFNBQ0RLLGVBQUFDLEVBQUFDLEdBZUEsSUFBSyxJQUFJQyxLQUFnQmIsUUFkekJHLEdBQUFBLElBQXFCUSxFQU56QixJQU0wQyxJQUFBRyxFQUFBLFdBQUEsSUFBQUMsRUFBQUMsZUFBQUMsRUFBQUMsR0FBQSxHQU4xQ0MsRUFNMENKLEVBQUEsR0FBQUEsRUFBQSxHQUdWSyxRQUExQmYsU0FBQUEsRUFBQUEsRUFBQUEsR0FBMkNGLEdBQUFBLE9BQUFBLFFBQWFDLEdBQVEsR0FBQSxLQUF0Q1EsRUFBQSxDQUFoQyxJQUFBUyxFQUFBQyxFQUFBQyxHQUFBRixTQUVnQmhC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TUFBQUEsRUFBQUEsRUFBQUEsS0FBQUEsTUFBa0IsQ0FBQSxJQUFWYSxFQUFVd0QsRUFBQXJDLE1BQ2pCLFFBQU9uQixFQUFBb0IsU0FDSnBCLEVBQUF3QixVQUFBRyxJQUFBLGFBSDhCLE1BQUFMLEdBQUFtQyxFQUFBOUMsRUFBQVcsR0FBQSxRQUFBbUMsRUFBQWxDLElBTXhDYSxlQVlPaEMsU0FBU1IsZUFBZSxPQUFPMEQsYUFBYSxZQUFZLEdBVmhFLElBUnlDSSxFQUFBQyxFQUFBN0MsMkJBUWhDeUMsU0FBb0JmLHVCQUFBLGdCQVJZLElBU2pDL0IsSUFBQUEsRUFBQUEsTUFBQUEsRUFBQUEsRUFBQUEsS0FBQUEsTUFBZ0JiLENBQUFBLEVBQUFBLE1BWVQ0QixVQUFVRyxJQUFJLGFBckJZLE1BQUFMLEdBQUFxQyxFQUFBaEQsRUFBQVcsR0FBQSxRQUFBcUMsRUFBQXBDLE1BV0EsU0FBQWEsZUFDakMsSUFBQXdCLEVBQUF4RCxTQUFBUixlQUFBLFlBQStCZ0UsRUFBdkI1RCxVQUF1QjJCLElBQUEsWUFpQm5DaUMsRUFBUWxELGlCQUFpQixRQUFTLFNBQVVDLEdBaEJwQ0EsRUFBQWtELG1CQUNJN0QsR0E1RWhCOEIsMEJBQTBCM0MiLCJmaWxlIjoiZnVuY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBnZXREYXRhRnJvbVNlcnZlciA9ICgpID0+IHtcclxuICAgIHJldHVybiBmZXRjaCgnLi4vZGF0YS5qc29uJylcclxuICAgIC50aGVuKChkYXRhT2JqKSA9PiBkYXRhT2JqLmpzb24oKSlcclxuICAgIC50aGVuKChkYXRhT2JqKSA9PiB7XHJcbiAgICAgICAgcHVzaE9ialRvTG9jYWxTdG9yYWdlKGRhdGFPYmopO1xyXG4gICAgICAgIHJldHVybiBkYXRhT2JqO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBwdXNoT2JqVG9Mb2NhbFN0b3JhZ2UgPSAoZGF0YU9iaikgPT4ge1xyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXRhR29vZHMnKSkge1xyXG4gICAgICAgIC8vIGRlYnVnZ2VyO1xyXG4gICAgICAgIGdldERhdGFGcm9tTG9jYWxTdG9yYWdlKCk7XHJcbiAgICB9XHJcbiAgICAvLyBkZWJ1Z2dlcjtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhR29vZHMnLCBKU09OLnN0cmluZ2lmeShkYXRhT2JqKSk7XHJcbn07XHJcblxyXG5jb25zdCBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSA9ICgpID0+IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhdGFHb29kcycpKTtcclxuXHJcbmNvbnN0IGRhdGFPYmogPSBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG5cclxuXHJcbi8vIGNvbnNvbGUubG9nKE9iamVjdC52YWx1ZXMoZGF0YU9ialtjYXRlZ29yeUl0ZW1dKSk7XHJcbi8vIGNvbnNvbGUubG9nKE9iamVjdC5lbnRyaWVzKGRhdGFPYmpbY2F0ZWdvcnlJdGVtXSkpO1xyXG4vLyBjb25zb2xlLmxvZyhPYmplY3QudmFsdWVzKE9iamVjdC52YWx1ZXMoZGF0YU9ialtjYXRlZ29yeUl0ZW1dKSlbMF0pO1xyXG5cclxuZnVuY3Rpb24gZGlzcGxheVByb2R1Y3QoY29sbGVjdGlvbiwgaWQpIHtcclxuXHJcbiAgICBmb3IgKGxldCBjYXRlZ29yeUl0ZW0gaW4gZGF0YU9iaikge1xyXG4gICAgICAgIGlmKGNhdGVnb3J5SXRlbSA9PT0gY29sbGVjdGlvbikge1xyXG4gICAgICAgICAgICBmb3IobGV0IFtzdWJjYXRlZ29yaWVzLCBjYXRlZ29yeVZhbHVlc10gb2YgT2JqZWN0LmVudHJpZXMoZGF0YU9ialtjYXRlZ29yeUl0ZW1dKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5VmFsdWVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmVudHJpZXMoaXRlbSlbMF1bMV0gPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxdWFudGl0eSA9IGFyZ1tpXS5xdWFudGl0eTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lLW9kaicpLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+JHthcmdbaV0ubmFtZX08L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMj4kJHthcmdbaV0ucHJpY2V9PC9oMj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJsaXN0XCIgaWQ9XCJsaXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YT48c3Bhbj5DYXRlZ29yeTwvc3Bhbj4gOiAgJHtzdWJjYXRlZ29yaWVzfTwvYT48L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PGE+PHNwYW4+QnJhbmQ8L3NwYW4+IDogJHthcmdbaV0uYnJhbmR9PC9hPjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YT48c3Bhbj5Db2xvcjwvc3Bhbj4gOiAke2FyZ1tpXS5jb2xvcn08L2E+PC9saT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxhPjxzcGFuPkF2YWlsaWJpbGl0eTwvc3Bhbj4gOiAke2RldGVybWluZUF2YWlsYWJpbGl0eShxdWFudGl0eSl9PC9hPjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48YT48c3Bhbj5TaXplPC9zcGFuPiA6IDwvYT48L2xpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48ZGl2IGlkPVwic2l6ZVwiIGRhdGEtcXVhbnRpdHk9XCIke2FyZ1tpXS5xdWFudGl0eX1cIj48L2Rpdj48L2xpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD4ke2FyZ1tpXVsnc2hvcnQtZGVzY3JpcHRpb24nXX08L3A+YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9maWxlJykuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPiR7YXJnW2ldLmRlc2NyaXB0aW9ufTwvcD5gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWcnKS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTJcIiBpZD1cImFsbC1waG90b1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtLWJvdHRvbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpbWctZmx1aWQgaW1nLXRodW1ibmFpbFwiIHNyYz1cImltZy9wcm9kdWN0LyR7Y29sbGVjdGlvbn0vJHtPYmplY3QuZW50cmllcyhpdGVtKVsxXVsxXVswXX1cIiBhbHQ9XCJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtLWJvdHRvbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpbWctZmx1aWQgaW1nLXRodW1ibmFpbFwiIHNyYz1cImltZy9wcm9kdWN0LyR7Y29sbGVjdGlvbn0vJHtPYmplY3QuZW50cmllcyhpdGVtKVsxXVsxXVsxXX1cIiBhbHQ9XCJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtLWJvdHRvbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpbWctZmx1aWQgaW1nLXRodW1ibmFpbFwiIHNyYz1cImltZy9wcm9kdWN0LyR7Y29sbGVjdGlvbn0vJHtPYmplY3QuZW50cmllcyhpdGVtKVsxXVsxXVsyXX1cIiBhbHQ9XCJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tMTAgY29udGFpbmVyLWZsdWlkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaW1nLWZsdWlkIGltZy10aHVtYm5haWxcIiBpZD1cInBob3RvLXRvLXZpZXdcIiBzcmM9XCJpbWcvcHJvZHVjdC8ke2NvbGxlY3Rpb259LyR7T2JqZWN0LmVudHJpZXMoaXRlbSlbMV1bMV1bMF19XCIgYWx0PVwiXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoaXRlbSlbNF1bMV0uZm9yRWFjaChmdW5jdGlvbihpdGVtU2l6ZSwgaW5kLCBhcnJTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2l6ZScpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PHNwYW4+JHthcnJTaXplW2luZF19PC9zcGFuPjwvZGl2PmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2ZlckRhdGFQcm9kdWN0VG9DYXJ0KGl0ZW0sIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZWxlY3RlZFNpemUoKSB7XHJcbiAgICBsZXQgc2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXplJyk7XHJcbiAgICBzaXplLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsgLy8vLy8vLy8vLy9cclxuXHJcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIHNpemUuY2hpbGROb2Rlcykge1xyXG4gICAgICAgICAgICBpZihpdGVtLnRhZ05hbWUgPT09ICdESVYnKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZS50YXJnZXQudGFnTmFtZSA9PT0gJ0RJVicpIHtcclxuICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdTUEFOJyl7XHJcbiAgICAgICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gbG9jYWxTdG9yYWdlR2V0KCkge1xyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXRhQ2FydCcpKSB7XHJcbiAgICAgICAgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF0YUNhcnQnKSlcclxuICAgIH1cclxuICAgIGxldCBpbmZvID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhdGFDYXJ0Jyk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGluZm8gPSBKU09OLnBhcnNlKGluZm8pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluZm87XHJcbn1cclxuXHJcbmxldCBxdWFudGl0eSA9IGxvY2FsU3RvcmFnZUdldCgpO1xyXG5zaG93UXVhbnRpdHlHb29kc0luQmFza2V0KHF1YW50aXR5KTtcclxuXHJcbmZ1bmN0aW9uIHNob3dRdWFudGl0eUdvb2RzSW5CYXNrZXQocXVhbnRpdHlHb29kcykge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3cnKS5pbm5lckhUTUwgPSBxdWFudGl0eUdvb2RzLmxlbmd0aDtcclxufVxyXG5cclxuZnVuY3Rpb24gdHJhbnNmZXJEYXRhUHJvZHVjdFRvQ2FydChwcm9kdWN0LCBjb2xsZWN0aW9uLCBkYXRhQ2FydCkge1xyXG4gICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpemUnKS5kYXRhc2V0WydxdWFudGl0eSddID09PSBcIjBcIikge1xyXG4gICAgICAgIG5vdEFkZFRvQ2FydCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtY2FydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgbGV0IGRhdGFQcm9kdWN0VG9DYXJ0ID0ge307IC8v0L7QsdGK0LXQutGCLCDQutC+0YLQvtGA0YvQuSDQsdGD0LTQtdGCINC30LDQv9C40YHRi9Cy0LDRgtGM0YHRjyDQsiBsb2NhbFN0b3JhZ2VcclxuICAgICAgICBsZXQgY3VycmVudENhcnRJdGVtcyA9IGxvY2FsU3RvcmFnZUdldChkYXRhQ2FydCkgfHwgW107XHJcblxyXG4gICAgICAgIGRhdGFQcm9kdWN0VG9DYXJ0LmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xyXG4gICAgICAgIGZvcihsZXQgaXQgaW4gcHJvZHVjdCkge1xyXG4gICAgICAgICAgICBpZihpdCA9PT0gJ2lkJykge1xyXG4gICAgICAgICAgICAgICAgZGF0YVByb2R1Y3RUb0NhcnQuaWQgPSBwcm9kdWN0W2l0XTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGl0ID09PSAnbmFtZScpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFQcm9kdWN0VG9DYXJ0Lm5hbWUgPSBwcm9kdWN0W2l0XTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKGl0ID09PSAncHJpY2UnKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhUHJvZHVjdFRvQ2FydC5wcmljZSA9IHByb2R1Y3RbaXRdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYoaXQgPT09ICdwaG90bycpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFQcm9kdWN0VG9DYXJ0LnBob3RvID0gcHJvZHVjdFtpdF1bMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHF1YW50aXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncXR5Jyk7XHJcbiAgICAgICAgZGF0YVByb2R1Y3RUb0NhcnQucXVhbnRpdHkgPSBxdWFudGl0eVswXS52YWx1ZTtcclxuXHJcbiAgICAgICAgbGV0IHNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2l6ZScpO1xyXG4gICAgICAgIGZvcihsZXQgaXRlbSBvZiBzaXplLmNoaWxkTm9kZXMpIHtcclxuICAgICAgICAgICAgaWYoaXRlbS5jbGFzc05hbWUgPT09ICdzZWxlY3RlZCcpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFQcm9kdWN0VG9DYXJ0LnNpemUgPSBpdGVtLmlubmVyVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjdXJyZW50Q2FydEl0ZW1zLnB1c2goZGF0YVByb2R1Y3RUb0NhcnQpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2NhbFN0b3JhZ2VTZXQoYXIpIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RhdGFDYXJ0JywgSlNPTi5zdHJpbmdpZnkoYXIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZVNldChjdXJyZW50Q2FydEl0ZW1zKTtcclxuXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRTZWxlY3RlZFNpemUoKSB7XHJcbiAgICBsZXQgc2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXplJyk7XHJcbiAgICBzaXplLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpZXdQaG90bygpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGwtcGhvdG8nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGxldCBwaG90b1RvVmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG90by10by12aWV3Jyk7XHJcbiAgICAgICAgbGV0IGRhdGFTcmMgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xyXG4gICAgICAgIHBob3RvVG9WaWV3LnNldEF0dHJpYnV0ZSgnc3JjJywgZGF0YVNyYyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGV0ZXJtaW5lQXZhaWxhYmlsaXR5KHF1YW50aXR5KSB7XHJcbiAgICBpZihxdWFudGl0eSA9PT0gXCIwXCIpIHtcclxuICAgICAgICByZXR1cm4gJ05vdCBhdmFpbGFibGUnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJ0luIHN0b2NrJztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbm90QXZhaWxhYmxlU3R5bGUoKSB7XHJcbiAgICBsZXQgc2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXplJyk7XHJcblxyXG4gICAgaWYoc2l6ZS5kYXRhc2V0WydxdWFudGl0eSddID09PSBcIjBcIikge1xyXG4gICAgICAgIGZvcihsZXQgaXRlbSBvZiBzaXplLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGlmKGl0ZW0udGFnTmFtZSA9PT0gJ0RJVicpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBub3RBZGRUb0NhcnQoKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXR5Jykuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgIGxldCBhcnJvd3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpdGVtcy1jb3VudCcpO1xyXG4gICAgICAgIGZvcihsZXQgaXQgb2YgYXJyb3dzKSB7XHJcbiAgICAgICAgICAgIGl0LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBub3RBZGRUb0NhcnQoKSB7XHJcbiAgICBsZXQgYWRkQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtY2FydCcpO1xyXG4gICAgYWRkQ2FydC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgYWRkQ2FydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG59XHJcblxyXG4iXX0=
