"use strict";function addDataProductToCart(){var t=document.getElementById("tbody");if(0!==t.length)for(var n=t.childNodes.length-1;0<n;n--)t.removeChild(t.childNodes[n]);function a(){return JSON.parse(localStorage.getItem("dataCart"))}localStorage.getItem("dataCart")&&a();var e=a(),o=e.length;for(var c in showQuantityGoodsInBasket(o),e)t.insertAdjacentHTML("beforeend",'\n                            <tr data-id="'.concat(e[c].id,'">\n                              <td>\n                                  <div class="media">\n                                      <div class="d-flex">\n                                          <img src="img/product/').concat(e[c].collection,"/").concat(e[c].photo,'" alt="">\n                                      </div>\n                                      <div class="media-body">\n                                          <p>').concat(e[c].name+" ("+e[c].size+")","</p>\n                                      </div>\n                                  </div>\n                              </td>\n                              <td>\n                                  <h5>$").concat(e[c].price,'</h5>\n                              </td>\n                              <td>\n                                  <div class="product_count" data-price="').concat(e[c].price,'" data-id="').concat(e[c].id,'">\n                                      <button class="reduced items-count" type="button"><i class="ti-angle-left"></i></button>\n                                      <input type="text" name="qty" size="2" maxlength="12" value="').concat(e[c].quantity,'" title="Quantity:" class="input-text qty">\n                                      <button class="increase items-count" type="button"><i class="ti-angle-right"></i></button>\n                                  </div>\n                              </td>\n                              <td>\n                                  <h5 class="product-amount" id="product-amount">$').concat(calculationAmount(e[c].quantity,e[c].price),'</h5>\n                              </td>\n                              <td>\n                                <button type="button" class="close" aria-label="Close">\n                                    <span aria-hidden="true" title="Remove goods from the basket">&times;</span>\n                                </button>\n                               </td>\n                           </tr>'))}function calculationAmount(t,n){return Number(n*t).toFixed(2)}function calculationAllProductAmount(){var t=document.getElementsByClassName("product-amount"),n=0;for(var a in t)if(void 0!==t[a].innerHTML){var e=t[a].innerHTML.split("");e.splice(0,1);var o=e.join("");n+=Number(o)}displayAllProductAmount(n.toFixed(2))}function displayAllProductAmount(t){document.getElementById("subtotal").insertAdjacentHTML("afterbegin","\n                            <h5>$".concat(t,"</h5>"))}function localStorageSet(t){localStorage.setItem("dataCart",JSON.stringify(t))}function catchChangesInBasket(){document.getElementById("tbody").addEventListener("click",function(t){var n=JSON.parse(localStorage.getItem("dataCart")),a=t.target.parentNode.parentNode.parentNode;if("SPAN"===t.target.tagName){for(var e in n)a.dataset.id===n[e].id&&(n.splice([e],1),localStorageSet(n));addDataProductToCart()}else{t.target.tagName;var o=document.getElementsByClassName("items-count");if(o)for(var c in o){if(a.parentNode.dataset.id===o[c].parentNode.dataset.id)displayCalc(calculationAmount(o[c].parentNode.children[1].value,o[c].parentNode.attributes[1].value))}}showQuantityGoodsInBasket(n.length)})}function displayCalc(t){document.getElementById("product-amount").innerHTML="$"+t}function showQuantityGoodsInBasket(t){document.getElementById("show").innerHTML=t}addDataProductToCart(),calculationAllProductAmount(),catchChangesInBasket();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9uQ2FydC5qcyJdLCJuYW1lcyI6WyJhZGREYXRhUHJvZHVjdFRvQ2FydCIsInRib2R5IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImxlbmd0aCIsImkiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJsb2NhbFN0b3JhZ2UiLCJxdWFudCIsImRhdGFDYXJ0Iiwic2hvd1F1YW50aXR5R29vZHNJbkJhc2tldCIsImluc2VydEFkamFjZW50SFRNTCIsImNvbmNhdCIsIml0IiwiaWQiLCJjb2xsZWN0aW9uIiwicGhvdG8iLCJuYW1lIiwic2l6ZSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwcmljZSIsInF1YW50aXR5IiwiY2FsY3VsYXRpb25BbW91bnQiLCJOdW1iZXIiLCJzdHJpbmdpZnkiLCJ0b0ZpeGVkIiwicHJvZHVjdEFtb3VudCIsInN1bSIsImN1cnJlbnRDYXJ0SXRlbXMiLCJ0ciIsInBhcmVudE5vZGUiLCJhcnIiLCJpdGVtIiwiaW5uZXJIVE1MIiwic3BsaXQiLCJ0YXJnZXQiLCJzcGxpY2UiLCJ0YWdOYW1lIiwiZGF0YXNldCIsIm51bWJlciIsImRpc3BsYXlBbGxQcm9kdWN0QW1vdW50IiwiYXJyb3dzIiwibG9jYWxTdG9yYWdlU2V0Iiwib2IiLCJkYXRhSWQiLCJhcnJvd0lkIiwiSlNPTiIsImNhdGNoQ2hhbmdlc0luQmFza2V0IiwiZGlzcGxheUNhbGMiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicGFyc2UiLCJhckl0ZW0iLCJjaGlsZHJlbiIsImF0dHJpYnV0ZXMiLCJxdWFudGl0eUdvb2RzIiwiY2FsY3VsYXRpb25BbGxQcm9kdWN0QW1vdW50Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUlBLFNBQVNBLHVCQUVMLElBQUlDLEVBQVFDLFNBQVNDLGVBQWUsU0FDcEMsR0FBQSxJQUFHRixFQUFNRyxPQUNMLElBQVNDLElBQUlKLEVBQUFBLEVBQU1LLFdBQVdGLE9BQWEsRUFBTyxFQUFKQyxFQUE5Q0EsSUFDVUUsRUFBQUEsWUFBa0JELEVBQUFBLFdBQXhCRCxJQUl3QixTQUExQkcsSUFBMEIsT0FBMUJBLEtBQUFBLE1BQUFBLGFBQTBCQyxRQUFBLGFBQWhDQyxhQUFBRCxRQUFBLGFBR0lELElBQUFBLElBQUFBLEVBQUFBLElBSUFHLEVBQVFDLEVBQVNSLE9BQ3JCUyxJQUFBQSxJQUFBQSxLQUhBQSwwQkFBaUJMLEdBR2pCSyxFQUdJWixFQUFNYSxtQkFBbUIsWUFBekIsOENBQUFDLE9BRG9CSCxFQUFBSSxHQUFBQyxHQUNwQiwrTkFBQUYsT0FLMERILEVBQVNJLEdBQUlFLFdBTHZFLEtBQUFILE9BS3FGSCxFQUFTSSxHQUFJRyxNQUxsRywwS0FBQUosT0FxQ0pILEVBQUFJLEdBQUFJLEtBQUEsS0FBQVIsRUFBQUksR0FBQUssS0FBQSxJQXJDSSxrTkFBQU4sT0EyQ3lCTyxFQUFBQSxHQUF1QkMsTUEzQ2hELDZKQUFBUixPQThDMkJILEVBQUFJLEdBQUFPLE1BOUMzQixlQUFBUixPQThDMkJILEVBQUFJLEdBQUFDLEdBOUMzQiwyT0FBQUYsT0FnRElILEVBQUFJLEdBQUFRLFNBaERKLHdYQUFBVCxPQXNESFUsa0JBQUFiLEVBQUFJLEdBQUFRLFNBQUFaLEVBQUFJLEdBQUFPLE9BdERHLGlaQWtDUixTQUFTRSxrQkFBa0JELEVBQVVELEdBb0NyQyxPQUh5QkcsT0FBckJILEVBQXNDSSxHQUN6Q0MsUUFBQSxHQU1PLFNBQU1wQiw4QkFBMEIsSUFBQXFCLEVBQWlCbkIsU0FBQUEsdUJBQVgsa0JBQXRDb0IsRUFBQSxFQUNBLElBQU1DLElBQUFBLEtBQUFBLEVBQ0ZDLFFBQW9DQyxJQUFsQ0osRUFBWUksR0FBQUEsVUFBbEIsQ0E1QkksSUFBSUMsRUFBTUwsRUFBY00sR0FBTUMsVUFBVUMsTUFBTSxJQThCN0NDLEVBQUZDLE9BQVNDLEVBQVQsR0FDSyxJQUFJeEIsRUFBTWUsRUFBQUEsS0FBQUEsSUFDUEMsR0FBR1MsT0FBSEMsR0F4QmZDLHdCQTRCU2IsRUFBQUYsUUFBQSxJQUc4QyxTQUFBZSx3QkFBQWIsR0FDL0M1QixTQUFJMEMsZUFBa0J0QixZQUFBQSxtQkFBdUIsYUFBN0Msc0NBQUFQLE9BM0J1QmUsRUEyQnZCLFVBdEJaLFNBQVNlLGdCQUFnQkMsR0E0QkxwQyxhQUFHcUMsUUFBV0MsV0FBU0MsS0FBQXRCLFVBQUFtQixJQUduQixTQUFBSSx1QkFFQUMsU0FBWUMsZUFBWixTQUVQQyxpQkFBQSxRQUFBLFNBQUFDLEdBQ0osSUFDSnZCLEVBRElrQixLQUFBTSxNQUFBN0MsYUFBQUQsUUFBQSxhQTFCRHVCLEVBQUtzQixFQUFFaEIsT0FBT0wsV0FBV0EsV0FBV0EsV0E2QnhDcEIsR0FBMEJXLFNBQTFCWCxFQUFBQSxPQUFBQSxRQUFBLENBaENKLElBQUEsSUFBQUcsS0FBQWUsRUFtQ0hDLEVBQUFTLFFBQUF4QixLQUFBYyxFQUFBZixHQUFBQyxLQTNCdUJjLEVBQWlCUSxPQUFPLENBQUN2QixHQUFLLEdBNkJqQ29DLGdCQUFPckIsSUF6QmhCL0IsMkJBRUMsQ0FBR3NELEVBQUVoQixPQUFPRSxRQTZCaEIzQixJQUFBQSxFQUFBQSxTQUFUUyx1QkFBa0QsZUFDckNuQixHQUFBQSxFQUNaLElBQUEsSUFBQXFELEtBQUFaLEVBQUEsQ0F4Qm1CLEdBSGFaLEVBQUdDLFdBQVdRLFFBQVF4QixLQUNyQjJCLEVBQU9ZLEdBQVF2QixXQUFXUSxRQUFReEIsR0FPNUNrQyxZQUZZMUIsa0JBRkZtQixFQUFPWSxHQUFRdkIsV0FBV3dCLFNBQVMsR0FBR0wsTUFDcENSLEVBQU9ZLEdBQVF2QixXQUFXeUIsV0FBVyxHQUFHTixTQVNwRXZDLDBCQURla0IsRUFBaUIzQixVQU14QyxTQUFTK0MsWUFBWUMsR0FDakJsRCxTQUFTQyxlQUFlLGtCQUFrQmlDLFVBQVksSUFBTWdCLEVBS2hFLFNBQVN2QywwQkFBMEI4QyxHQUMvQnpELFNBQVNDLGVBQWUsUUFBUWlDLFVBQVl1QixFQTNJaEQzRCx1QkFpSG9CNEQsOEJBdUJwQlYiLCJmaWxlIjoiZnVuY3Rpb25DYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYWRkRGF0YVByb2R1Y3RUb0NhcnQoKTtcclxuXHJcbmZ1bmN0aW9uIGFkZERhdGFQcm9kdWN0VG9DYXJ0KCkge1xyXG5cclxuICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0Ym9keScpO1xyXG4gICAgaWYodGJvZHkubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRib2R5LmNoaWxkTm9kZXMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG4gICAgICAgICAgICB0Ym9keS5yZW1vdmVDaGlsZCh0Ym9keS5jaGlsZE5vZGVzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZ2V0RGF0YUZyb21Mb2NhbFN0b3JhZ2UgPSAoKSA9PiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXRhQ2FydCcpKTtcclxuXHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhdGFDYXJ0JykpIHtcclxuICAgICAgICBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGF0YUNhcnQgPSBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG5cclxuICAgIGxldCBxdWFudCA9IGRhdGFDYXJ0Lmxlbmd0aDtcclxuICAgIHNob3dRdWFudGl0eUdvb2RzSW5CYXNrZXQocXVhbnQpO1xyXG5cclxuICAgIGZvcihsZXQgaXQgaW4gZGF0YUNhcnQpIHtcclxuICAgICAgICB0Ym9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwiJHtkYXRhQ2FydFtpdF0uaWR9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJpbWcvcHJvZHVjdC8ke2RhdGFDYXJ0W2l0XS5jb2xsZWN0aW9ufS8ke2RhdGFDYXJ0W2l0XS5waG90b31cIiBhbHQ9XCJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVkaWEtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD4ke2RhdGFDYXJ0W2l0XS5uYW1lICsgJyAnICsgJygnICsgZGF0YUNhcnRbaXRdLnNpemUgKyAnKSd9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT4kJHtkYXRhQ2FydFtpdF0ucHJpY2V9PC9oNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3RfY291bnRcIiBkYXRhLXByaWNlPVwiJHtkYXRhQ2FydFtpdF0ucHJpY2V9XCIgZGF0YS1pZD1cIiR7ZGF0YUNhcnRbaXRdLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJyZWR1Y2VkIGl0ZW1zLWNvdW50XCIgdHlwZT1cImJ1dHRvblwiPjxpIGNsYXNzPVwidGktYW5nbGUtbGVmdFwiPjwvaT48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwicXR5XCIgc2l6ZT1cIjJcIiBtYXhsZW5ndGg9XCIxMlwiIHZhbHVlPVwiJHtkYXRhQ2FydFtpdF0ucXVhbnRpdHl9XCIgdGl0bGU9XCJRdWFudGl0eTpcIiBjbGFzcz1cImlucHV0LXRleHQgcXR5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImluY3JlYXNlIGl0ZW1zLWNvdW50XCIgdHlwZT1cImJ1dHRvblwiPjxpIGNsYXNzPVwidGktYW5nbGUtcmlnaHRcIj48L2k+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwicHJvZHVjdC1hbW91bnRcIiBpZD1cInByb2R1Y3QtYW1vdW50XCI+JCR7Y2FsY3VsYXRpb25BbW91bnQoZGF0YUNhcnRbaXRdLnF1YW50aXR5LCBkYXRhQ2FydFtpdF0ucHJpY2UpfTwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHRpdGxlPVwiUmVtb3ZlIGdvb2RzIGZyb20gdGhlIGJhc2tldFwiPiZ0aW1lczs8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjdWxhdGlvbkFtb3VudChxdWFudGl0eSwgcHJpY2UpIHtcclxuXHJcbiAgICBsZXQgcmVzdWx0Q2FsY0Ftb3VudCA9IE51bWJlcihwcmljZSAqIHF1YW50aXR5KTtcclxuICAgIGxldCByZXN1bHQgPSByZXN1bHRDYWxjQW1vdW50LnRvRml4ZWQoMik7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRpb25BbGxQcm9kdWN0QW1vdW50KCkge1xyXG4gICAgbGV0IHByb2R1Y3RBbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwcm9kdWN0LWFtb3VudCcpO1xyXG4gICAgbGV0IHN1bSA9IDA7XHJcblxyXG4gICAgZm9yKGxldCBpdGVtIGluIHByb2R1Y3RBbW91bnQpIHtcclxuICAgICAgICBpZihwcm9kdWN0QW1vdW50W2l0ZW1dLmlubmVySFRNTCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBwcm9kdWN0QW1vdW50W2l0ZW1dLmlubmVySFRNTC5zcGxpdCgnJyk7XHJcbiAgICAgICAgICAgIGFyci5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgIGxldCBudW1iZXIgPSBhcnIuam9pbignJyk7XHJcbiAgICAgICAgICAgIHN1bSArPSBOdW1iZXIobnVtYmVyKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IHJlc1N1bSA9IHN1bS50b0ZpeGVkKDIpO1xyXG4gICAgZGlzcGxheUFsbFByb2R1Y3RBbW91bnQocmVzU3VtKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzcGxheUFsbFByb2R1Y3RBbW91bnQoc3VtKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VidG90YWwnKS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+JCR7c3VtfTwvaDU+YCk7XHJcbn1cclxuXHJcbmNhbGN1bGF0aW9uQWxsUHJvZHVjdEFtb3VudCgpO1xyXG5cclxuZnVuY3Rpb24gbG9jYWxTdG9yYWdlU2V0KG9iKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YUNhcnQnLCBKU09OLnN0cmluZ2lmeShvYikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYXRjaENoYW5nZXNJbkJhc2tldCgpIHtcclxuICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0Ym9keScpO1xyXG5cclxuICAgIHRib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBjb25zdCBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSA9ICgpID0+IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhdGFDYXJ0JykpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYXJ0SXRlbXMgPSBnZXREYXRhRnJvbUxvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgIGxldCB0ciA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICBpZihlLnRhcmdldC50YWdOYW1lID09PSAnU1BBTicpIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpdCBpbiBjdXJyZW50Q2FydEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBpZih0ci5kYXRhc2V0LmlkID09PSBjdXJyZW50Q2FydEl0ZW1zW2l0XS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2FydEl0ZW1zLnNwbGljZShbaXRdLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2V0KGN1cnJlbnRDYXJ0SXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkZERhdGFQcm9kdWN0VG9DYXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoZS50YXJnZXQudGFnTmFtZSA9PT0gJ1NQQU4nIHx8ICdCVVRUT04nKSB7IC8v0L3QsNC20LDRgtC40LUg0L3QsCBhcnJvd3MgICjQv9C+0YHQu9C1INCy0YHQtdGFINC40LfQvNC10L3QtdC90LjQuSDQv9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCBDb250aW51ZSBTaG9wcGluZyDQuNC70LggUHJvY2VlZCB0byBjaGVja291dCDQsdGD0LTQtdGCINC80LXQvdGP0YLRjNGB0Y8g0LIgbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgICAgIGxldCBhcnJvd3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpdGVtcy1jb3VudCcpO1xyXG4gICAgICAgICAgICBpZihhcnJvd3MpIHtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgYXJJdGVtIGluIGFycm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhSWQgPSB0ci5wYXJlbnROb2RlLmRhdGFzZXQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFycm93SWQgPSBhcnJvd3NbYXJJdGVtXS5wYXJlbnROb2RlLmRhdGFzZXQuaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGFJZCA9PT0gYXJyb3dJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcW50ID0gYXJyb3dzW2FySXRlbV0ucGFyZW50Tm9kZS5jaGlsZHJlblsxXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByaWNlID0gYXJyb3dzW2FySXRlbV0ucGFyZW50Tm9kZS5hdHRyaWJ1dGVzWzFdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBjYWxjdWxhdGlvbkFtb3VudChxbnQsIHByaWNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlDYWxjKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHF1YW50aXR5ID0gY3VycmVudENhcnRJdGVtcy5sZW5ndGg7XHJcbiAgICAgICAgc2hvd1F1YW50aXR5R29vZHNJbkJhc2tldChxdWFudGl0eSk7XHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZGlzcGxheUNhbGModmFsdWUpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9kdWN0LWFtb3VudCcpLmlubmVySFRNTCA9ICckJyArIHZhbHVlO1xyXG59XHJcblxyXG5jYXRjaENoYW5nZXNJbkJhc2tldCgpO1xyXG5cclxuZnVuY3Rpb24gc2hvd1F1YW50aXR5R29vZHNJbkJhc2tldChxdWFudGl0eUdvb2RzKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvdycpLmlubmVySFRNTCA9IHF1YW50aXR5R29vZHM7XHJcbn0iXX0=
